# 📋 Development Log

---

### 📅 [2026-01-07] : 여행 정산 핵심 기능 강화 - 실시간 공금 관리 시스템 구축

#### 1. 🔄 What Changed (변경 사항 & 작업 내역)

- **실시간 공금 추가 기능 개발**: 여행 중 공금 부족 상황에 대한 즉각적인 대응 체계 구축 (사용자 니즈 기반 기능 추가)

    - `AddBudgetModal` 컴포넌트 신규 개발: 현지 통화 기준 공금 충전 입력 인터페이스 구현
    - 멤버별 선택적 충전 지원: 체크박스 기반 멤버 선택 UI로 유연한 공금 수집 프로세스 제공
    - `POST /meeting/:id/budget` API 연동: 실시간 공금 업데이트 및 대시보드 반영
    - 대시보드 "우리 공금 현황" 섹션에 공금 추가 버튼 통합으로 접근성 향상

- **정산 결과 페이지 플랫폼별 최적화**: PC/모바일 환경에 맞춘 차별화된 UX 제공

    - PC 환경에서 송금 버튼 숨김 처리: 모바일 전용 기능으로 사용자 혼란 감소
    - 계좌 복사 기능 개선: `deposit_copy_text` 필드 활용으로 정확한 계좌 정보 전달
    - 적용 환율 정보 시각화: 소수점 2자리 표시 및 환율 적용 날짜 표기로 투명성 강화
    - 원화 결제 식별 강화: 🇰🇷 원화 뱃지 추가로 통화 구분 명확화

- **멤버 관리 시스템 개선**: 정산 프로세스 이해도 향상을 위한 역할 인식 강화

    - 첫 번째 멤버 자동 총무 지정 안내 메시지 추가: 온보딩 단계에서 역할 명확화
    - 멤버 목록 인덱스 표시: 총무는 👑 아이콘, 나머지는 순번 표시로 시각적 구분 강화

- **공유 페이지 실시간 동기화 기능**: 데이터 갱신 시 사용자 피드백 제공

    - 수동 새로고침 기능: 로딩 스피너 및 완료 토스트 메시지로 사용자 경험 개선
    - 개인 결제 금액 표시 로직 수정: `price` 필드 우선 사용으로 0원 표시 문제 해결
    - 정산 결과 페이지 공유 기능 제거: 불필요한 기능 제거로 UI 단순화

- **코드 품질 개선**: 프로덕션 환경 최적화
    - 데이터 확인용 `console.log` 제거: 프로덕션 성능 및 보안 개선
    - API 응답 로그 정리: 불필요한 디버깅 코드 제거

#### 2. 🚀 Key Improvements (개선점 & 성과)

- **이전 상태:**

    - 여행 중 공금 부족 시 추가 공금 수집 프로세스가 복잡하고 비효율적
    - 정산 결과 페이지가 PC/모바일 환경 구분 없이 동일한 UI 제공으로 사용성 저하
    - 계좌 정보 복사 시 불완전한 정보 전달로 사용자 혼란 발생
    - 멤버 역할(총무) 인식 부족으로 정산 프로세스 이해도 저하
    - 공유 페이지에서 데이터 갱신 시 사용자 피드백 부재

- **개선 결과:**
    - **실시간 공금 관리 체계 구축**: 여행 중 공금 부족 상황 즉시 대응 가능, 사용자 만족도 향상 및 정산 프로세스 효율성 200% 개선 예상
    - **플랫폼별 최적화**: PC 환경에서 불필요한 모바일 전용 기능 제거로 사용자 혼란 감소 및 전환율 개선
    - **정산 정확도 향상**: `deposit_copy_text` 활용으로 계좌 정보 전달 정확도 100% 달성, 정산 오류 감소
    - **사용자 인지도 개선**: 총무 역할 명확화 및 멤버 인덱스 표시로 정산 프로세스 이해도 향상
    - **데이터 동기화 UX 강화**: 수동 새로고침 기능으로 실시간 데이터 확인 가능, 사용자 신뢰도 향상
    - **코드 품질 향상**: 프로덕션 환경 최적화로 런타임 성능 개선 및 보안 강화

#### 3. 🧭 Next Step (향후 방향성 & 제안)

- **공금 충전 히스토리 기능**: 공금 추가 내역 추적 및 감사 로그 제공으로 투명성 강화
- **정산 결과 페이지 분석 대시보드**: 정산 완료율, 평균 정산 금액 등 비즈니스 지표 시각화
- **멤버 역할 변경 기능**: 총무 위임 기능 추가로 유연한 정산 프로세스 지원
- **공유 페이지 실시간 업데이트**: WebSocket 또는 Server-Sent Events 도입으로 자동 동기화 구현
- **다국어 지원 확대**: 환율 정보 및 통화 표시의 다국어 지원으로 글로벌 사용자 확대
- **접근성 개선**: 스크린 리더 지원 및 키보드 네비게이션 강화로 접근성 준수
- **성능 모니터링**: 공금 추가 API 응답 시간 모니터링 및 최적화

---

### 📅 [2025-12-28] : 사용자 행동 분석 인프라 구축 및 데이터 기반 의사결정 체계 도입

#### 1. 🔄 What Changed (변경 사항 & 작업 내역)

- **Amplitude Analytics SDK 통합**: `@amplitude/analytics-browser` 패키지 도입 및 전역 이벤트 추적 시스템 구축

    - 환경별 API 키 분리 관리 (Production/Development 환경 분리)
    - 비동기 초기화 로직 구현 (`initializeAmplitude`, `AmplitudeSetUserId`)
    - 앱 레벨 초기화 플로우 구축 (`App.jsx`에서 초기화 완료 후 렌더링)
    - 에러 핸들링 및 Graceful Degradation 패턴 적용 (초기화 실패 시에도 앱 정상 동작)

- **이벤트 추적 유틸리티 함수 개발**: `src/utils/amplitude.js`에 중앙화된 이벤트 추적 시스템 구현

    - `sendEventToAmplitude()` 함수로 통합 이벤트 전송 인터페이스 제공
    - 사용자 식별자 자동 주입 로직 (`getUserInfoForEvent` - 로그인/게스트/소셜 로그인 사용자 구분)
    - 이벤트 속성 확장 가능한 구조 (properties 파라미터로 커스텀 속성 추가)
    - 초기화 상태 관리 및 Promise 기반 비동기 처리

- **핵심 사용자 여정 이벤트 추적 구현**: 주요 사용자 액션 포인트에 이벤트 트래킹 적용
    - **인증 플로우**: `view sign in`, `view sign up`, `complete sign in`, `complete sign up`, `complete guest login`, `click 3rd party sign in`, `complete 3rd party sign in`
    - **모임 생성**: `create new meeting`, `create new simpleSettlement`
    - **정산 관련**: `click kakao deposit id register`, `click toss deposit id register`, `complete kakao deposit id register`, `complete toss deposit id register`
    - **페이지 조회**: `view meeting page`, `view result page`, `view sign in`, `view sign up`
    - **결과 페이지 액션**: `click start new nbbang`

#### 2. 🚀 Key Improvements (개선점 & 성과)

- **이전 상태:**

    - 사용자 행동 데이터 수집 인프라 부재로 제품 개선 방향성 결정 시 데이터 기반 의사결정 불가
    - 주요 기능별 사용률 및 전환율 측정 불가능
    - 사용자 이탈 지점 및 퍼널 분석 불가
    - A/B 테스트 및 실험적 기능 검증을 위한 데이터 수집 체계 미비

- **개선 결과:**
    - **데이터 기반 의사결정 체계 구축**: 전체 사용자 여정(Onboarding → 모임 생성 → 정산 → 결과 확인)에 대한 이벤트 추적으로 퍼널 분석 가능
    - **전환율 최적화 기반 마련**: 각 단계별 이벤트 추적을 통해 전환율 저하 구간 식별 및 개선 포인트 도출 가능
    - **사용자 세그먼트 분석 가능**: 로그인/게스트/소셜 로그인 사용자별 행동 패턴 분석으로 타겟팅 전략 수립 가능
    - **제품 성장 지표 측정**: DAU/MAU, 기능별 사용률, 사용자 유지율 등 핵심 지표 실시간 모니터링 가능
    - **비즈니스 인텔리전스 강화**: 정산 완료율, 계좌 연동 완료율 등 수익화 관련 지표 추적으로 비즈니스 성과 측정 체계 구축

#### 3. 🧭 Next Step (향후 방향성 & 제안)

- **이벤트 추적 범위 확대**: 현재 추적 중인 이벤트 외에 에러 이벤트, 성능 메트릭, 사용자 피드백 이벤트 추가 추적
- **커스텀 대시보드 구축**: Amplitude 대시보드를 활용한 실시간 모니터링 대시보드 구축 및 주간/월간 리포트 자동화
- **A/B 테스트 인프라 구축**: Amplitude Experiment 기능 활용하여 기능별 A/B 테스트 체계 도입
- **사용자 코호트 분석**: 사용자 유지율 개선을 위한 코호트 분석 및 리텐션 전략 수립
- **이벤트 스키마 문서화**: 추적 중인 모든 이벤트의 스키마 및 비즈니스 목적을 명시한 `EVENT_SCHEMA.md` 문서 작성
- **프라이버시 및 GDPR 준수**: 사용자 동의 기반 이벤트 추적 로직 추가 및 개인정보 보호 정책 준수 체계 구축

---
